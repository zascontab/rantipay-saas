invalid log level: , switching to default: INFO
DEBUG msg=config loaded: config.yaml format: yaml
2025/05/12 18:36:00 Register *di.Container
2025/05/12 18:36:00 Register server.Name
2025/05/12 18:36:00 Register *conf.Services
2025/05/12 18:36:00 Register *conf.Security
2025/05/12 18:36:00 Register *conf.SaasConf
2025/05/12 18:36:00 Register *conf.Data
2025/05/12 18:36:00 Register *conf.AppConfig
2025/05/12 18:36:00 Register *conf.Dev
2025/05/12 18:36:00 Register log.Logger
2025/05/12 18:36:00 Register []grpc.ClientOption
2025/05/12 18:36:00 Register *authz.DefaultAuthorizationService
2025/05/12 18:36:00 Register authz.Service
2025/05/12 18:36:00 Register *authz.SubjectResolverImpl
2025/05/12 18:36:00 Register authz.SubjectResolver
2025/05/12 18:36:00 Register jwt.Tokenizer
2025/05/12 18:36:00 Register *jwt.TokenizerConfig
2025/05/12 18:36:00 Register http.DecodeRequestFunc
2025/05/12 18:36:00 Register http.EncodeResponseFunc
2025/05/12 18:36:00 Register http.EncodeErrorFunc
2025/05/12 18:36:00 Register registry.Registrar
2025/05/12 18:36:00 Register *http.WebMultiTenancyOption
2025/05/12 18:36:00 Register *conf.Client
2025/05/12 18:36:00 Register *api.Option
2025/05/12 18:36:00 Register *api.InMemoryTokenManager
2025/05/12 18:36:00 Register api.TokenManager
2025/05/12 18:36:00 Register api.TrustedContextValidator
2025/05/12 18:36:00 Register registry.Discovery
2025/05/12 18:36:00 Register data.ConnStrResolver
2025/05/12 18:36:00 Register data.ConnStrings
2025/05/12 18:36:00 Register *gorm.SqlDbCache
2025/05/12 18:36:00 Register *gorm.DbCache
2025/05/12 18:36:00 Register gorm.DbProvider
2025/05/12 18:36:00 Register dal.ConstDbProvider
2025/05/12 18:36:00 Register uow.Manager
2025/05/12 18:36:00 Register vfs.Blob
2025/05/12 18:36:00 Register *redis.UniversalOptions
2025/05/12 18:36:00 Register redis.UniversalClient
2025/05/12 18:36:00 Register store.StoreInterface
2025/05/12 18:36:00 Register *cache.Cache[string]
2025/05/12 18:36:00 Register cache.CacheInterface[string]
2025/05/12 18:36:00 Register email.Client
2025/05/12 18:36:00 Register event.Producer
2025/05/12 18:36:00 Register *eventbus.EventBus
2025/05/12 18:36:00 Register asynq.RedisConnOpt
2025/05/12 18:36:00 Register *asynq.Client
2025/05/12 18:36:00 Register *api.UserTenantContrib
2025/05/12 18:36:00 Register session.RefreshTokenProvider
2025/05/12 18:36:00 Register *api.PermissionChecker
2025/05/12 18:36:00 Register authz.PermissionChecker
2025/05/12 18:36:00 Register authz.PermissionManagementService
2025/05/12 18:36:00 Register api.GrpcConn
2025/05/12 18:36:00 Register v1.UserServiceServer
2025/05/12 18:36:00 Register v1.UserInternalServiceServer
2025/05/12 18:36:00 Register v1.AuthServer
2025/05/12 18:36:00 Register v1.AccountServer
2025/05/12 18:36:00 Register v1.RoleServiceServer
2025/05/12 18:36:00 Register v1.PermissionServiceServer
2025/05/12 18:36:00 Register v1.PermissionInternalServiceServer
2025/05/12 18:36:00 Register api.GrpcConn
2025/05/12 18:36:00 Register v1.ProductServiceServer
2025/05/12 18:36:00 Register v1.ProductInternalServiceServer
2025/05/12 18:36:00 Register api.GrpcConn
2025/05/12 18:36:00 Register v1.SubscriptionServiceServer
2025/05/12 18:36:00 Register v1.SubscriptionInternalServiceServer
2025/05/12 18:36:00 Register api.GrpcConn
2025/05/12 18:36:00 Register v1.OrderServiceServer
2025/05/12 18:36:00 Register v1.OrderInternalServiceServer
2025/05/12 18:36:00 Register server.Init
2025/05/12 18:36:00 Register *service.Helper
2025/05/12 18:36:00 Register *service.MsgService
2025/05/12 18:36:00 Register v1.MsgServiceServer
2025/05/12 18:36:00 Register *data.BarrierMigrator
2025/05/12 18:36:00 Register *data.StorageMigrator
2025/05/12 18:36:00 Register *data.Migrator
2025/05/12 18:36:00 Register http.ServiceRegister
2025/05/12 18:36:00 Register grpc.ServiceRegister
2025/05/12 18:36:00 Register *service.EventService
2025/05/12 18:36:00 Register v1.EventServiceServer
2025/05/12 18:36:00 Register grpc.ServiceRegister
2025/05/12 18:36:00 Register http.ServiceRegister
2025/05/12 18:36:00 Register *http.Server
2025/05/12 18:36:00 Register transport.Server
2025/05/12 18:36:00 Register *grpc.Server
2025/05/12 18:36:00 Register transport.Server
2025/05/12 18:36:00 Register *job.Server
2025/05/12 18:36:00 Register transport.Server
2025/05/12 18:36:00 Register *event.ConsumerFactoryServer
2025/05/12 18:36:00 Register transport.Server
2025/05/12 18:36:00 Register api.ClientName
2025/05/12 18:36:00 Register dal.ConnName
2025/05/12 18:36:00 Register seed.Seeder
2025/05/12 18:36:00 Register seed.Contrib
2025/05/12 18:36:00 Register *authz.Option
2025/05/12 18:36:00 Register *data.Data
2025/05/12 18:36:00 Register biz.TenantRepo
2025/05/12 18:36:00 Register *data.Migrate
2025/05/12 18:36:00 Register biz.PlanRepo
2025/05/12 18:36:00 Register saas.TenantStore
2025/05/12 18:36:00 Register *biz.TenantUseCase
2025/05/12 18:36:00 Register event.ConsumerHandler
2025/05/12 18:36:00 Register event.ConsumerHandler
2025/05/12 18:36:00 Register event.ConsumerHandler
2025/05/12 18:36:00 Register event.ConsumerHandler
2025/05/12 18:36:00 Register event.ConsumerHandler
2025/05/12 18:36:00 Register event.ConsumerHandler
2025/05/12 18:36:00 Register biz.ConnStrGenerator
2025/05/12 18:36:00 Register http.ServiceRegister
2025/05/12 18:36:00 Register grpc.ServiceRegister
2025/05/12 18:36:00 Register *service.TenantService
2025/05/12 18:36:00 Register v1.TenantServiceServer
2025/05/12 18:36:00 Register *service.TenantInternalService
2025/05/12 18:36:00 Register v1.TenantInternalServiceServer
2025/05/12 18:36:00 Register *service.PlanService
2025/05/12 18:36:00 Register v1.PlanServiceServer
2025/05/12 18:36:00 Register *kratos.App
2025/05/12 18:36:00 Resolved log.Logger
2025/05/12 18:36:00 Resolved *conf.Services
2025/05/12 18:36:00 Resolved *conf.Security
2025/05/12 18:36:00 Resolved *jwt.TokenizerConfig
2025/05/12 18:36:00 Resolved jwt.Tokenizer
2025/05/12 18:36:00 Resolved api.TrustedContextValidator
2025/05/12 18:36:00 Resolved *eventbus.EventBus
2025/05/12 18:36:00 Resolved *conf.Data
2025/05/12 18:36:00 Resolved *gorm.SqlDbCache
2025/05/12 18:36:00 Resolved *gorm.DbCache
2025/05/12 18:36:00 Resolved data.ConnStrings
2025/05/12 18:36:00 Resolved dal.ConstDbProvider
2025/05/12 18:36:00 Resolved *data.Data
2025/05/12 18:36:00 Resolved biz.TenantRepo
2025/05/12 18:36:00 Resolved *conf.SaasConf
2025/05/12 18:36:00 Resolved biz.ConnStrGenerator
2025/05/12 18:36:00 Resolved *biz.TenantUseCase
2025/05/12 18:36:00 Resolved *conf.AppConfig
2025/05/12 18:36:00 Resolved vfs.Blob
2025/05/12 18:36:00 Resolved v1.TenantInternalServiceServer
2025/05/12 18:36:00 Resolved saas.TenantStore
2025/05/12 18:36:00 Resolved uow.Manager
2025/05/12 18:36:00 Resolved *http.WebMultiTenancyOption
2025/05/12 18:36:00 Resolved *api.Option
2025/05/12 18:36:00 Resolved http.DecodeRequestFunc
2025/05/12 18:36:00 Resolved http.EncodeResponseFunc
2025/05/12 18:36:00 Resolved http.EncodeErrorFunc
2025/05/12 18:36:00 Resolved api.ClientName
2025/05/12 18:36:00 Resolved *conf.Client
2025/05/12 18:36:00 Resolved *di.Container
2025/05/12 18:36:00 Register *clientv3.Client
2025/05/12 18:36:00 Resolved *clientv3.Client
2025/05/12 18:36:00 Resolved registry.Discovery
2025/05/12 18:36:00 Resolved api.TokenManager
2025/05/12 18:36:00 Resolved []grpc.ClientOption
2025/05/12 18:36:00 Resolved api.GrpcConn
2025/05/12 18:36:00 Resolved v1.UserInternalServiceServer
2025/05/12 18:36:00 Resolved *api.UserTenantContrib
2025/05/12 18:36:00 Resolved dal.ConnName
2025/05/12 18:36:00 Resolved *service.MsgService
2025/05/12 18:36:00 Resolved http.ServiceRegister
2025/05/12 18:36:00 Resolved event.ConsumerHandler
2025/05/12 18:36:00 Resolved biz.PlanRepo
WARN msg=[resolver] Zero endpoint found,refused to write, instances: []
2025/05/12 18:36:00 Resolved api.GrpcConn
2025/05/12 18:36:00 Resolved v1.SubscriptionInternalServiceServer
2025/05/12 18:36:00 Resolved event.ConsumerHandler
WARN msg=[resolver] Zero endpoint found,refused to write, instances: []
WARN msg=[resolver] Zero endpoint found,refused to write, instances: []
2025/05/12 18:36:00 Resolved api.GrpcConn
2025/05/12 18:36:00 Resolved v1.OrderInternalServiceServer
2025/05/12 18:36:00 Resolved event.ConsumerHandler
2025/05/12 18:36:00 Resolved []event.ConsumerHandler
INFO ts=2025-05-12T18:36:00-05:00 caller=di@v1.11.1/container.go:198 service.id=dev service.name=saas service.version= trace_id= span_id= msg=closing the data resources
{"level":"warn","ts":"2025-05-12T18:36:00.591-0500","logger":"etcd-client","caller":"v3@v3.5.5/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006dae00/localhost:2379","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
panic: local event server not registered

goroutine 1 [running]:
github.com/go-saas/kit/event.NewConsumerFactoryServer(0xc000732180, 0xc0001ceaa0)
	/home/wsi/developer/projects/rantipay/wankarlab/project/rantipay-saas/kit/event/consumer.go:122 +0x1ad
github.com/go-saas/kit/saas/private/server.NewEventServer(0xc00088e5e8?, {0x219cafe?, 0x18?}, {0x3987420, 0xc000844a00}, {0x399c2b0, 0xc00085b600}, {0xc000988d20, 0x6, 0x6}, ...)
	/home/wsi/developer/projects/rantipay/wankarlab/project/rantipay-saas/kit/saas/private/server/event.go:22 +0x65
reflect.Value.call({0x1e54580?, 0x3425978?, 0x41d8c5?}, {0x219cc12, 0x4}, {0xc000720180, 0x6, 0xb8?})
	/usr/local/go/src/reflect/value.go:596 +0xca6
reflect.Value.Call({0x1e54580?, 0x3425978?, 0x74ab6c5cc1c8?}, {0xc000720180?, 0xc00088ed20?, 0x41551b?})
	/usr/local/go/src/reflect/value.go:380 +0xb9
github.com/goava/di.constructorCompiler.compile({0x1, {{0x3ed46fc, 0x39}, {0x39c4770, 0x1e54580}, {0x1e54580, 0x3425978, 0x13}}}, {0xc000720180, 0x6, ...}, ...)
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/cmp_ctor.go:50 +0x72
github.com/goava/di.(*node).Value(0xc000180fa0, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:74 +0x275
github.com/goava/di.(*node).Value(0xc000180c80, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*node).Value(0xc000180d70, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*node).Value(0xc000181b30, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*node).Value(0xc000180e10, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*node).Value(0xc000181ae0, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*node).Value(0xc000181860, {0x399b438, 0xc000844c80})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*Container).invoke(0xc0001ceaa0, {0x1d1c900, 0x3425610}, {0x1?, 0xc000844c80?, 0xc0001ceaa0?})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/container.go:349 +0x4a8
github.com/goava/di.(*Container).Invoke(0xc00062dd68?, {0x1d1c900?, 0x3425610?}, {0x0?, 0x0?, 0x0?})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/container.go:111 +0x25
main.main()
	/home/wsi/developer/projects/rantipay/wankarlab/project/rantipay-saas/kit/saas/cmd/saas/main.go:163 +0x11a5
