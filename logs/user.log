invalid log level: , switching to default: INFO
DEBUG msg=config loaded: config.yaml format: yaml
2025/05/12 18:35:50 Register *di.Container
2025/05/12 18:35:50 Register server.Name
2025/05/12 18:35:50 Register *conf.Services
2025/05/12 18:35:50 Register *conf.Security
2025/05/12 18:35:50 Register *conf.AppConfig
2025/05/12 18:35:50 Register *conf.Dev
2025/05/12 18:35:50 Register *conf.UserConf
2025/05/12 18:35:50 Register *idp.Config
2025/05/12 18:35:50 Register *stripe.Conf
2025/05/12 18:35:50 Register *conf.Data
2025/05/12 18:35:50 Register log.Logger
2025/05/12 18:35:50 Register []grpc.ClientOption
2025/05/12 18:35:50 Register *authz.DefaultAuthorizationService
2025/05/12 18:35:50 Register authz.Service
2025/05/12 18:35:50 Register *authz.SubjectResolverImpl
2025/05/12 18:35:50 Register authz.SubjectResolver
2025/05/12 18:35:50 Register http.DecodeRequestFunc
2025/05/12 18:35:50 Register http.EncodeResponseFunc
2025/05/12 18:35:50 Register http.EncodeErrorFunc
2025/05/12 18:35:50 Register registry.Registrar
2025/05/12 18:35:50 Register *http.WebMultiTenancyOption
2025/05/12 18:35:50 Register jwt.Tokenizer
2025/05/12 18:35:50 Register *jwt.TokenizerConfig
2025/05/12 18:35:50 Register *conf.Client
2025/05/12 18:35:50 Register *api.Option
2025/05/12 18:35:50 Register *api.InMemoryTokenManager
2025/05/12 18:35:50 Register api.TokenManager
2025/05/12 18:35:50 Register api.TrustedContextValidator
2025/05/12 18:35:50 Register registry.Discovery
2025/05/12 18:35:50 Register data.ConnStrResolver
2025/05/12 18:35:50 Register data.ConnStrings
2025/05/12 18:35:50 Register *gorm.SqlDbCache
2025/05/12 18:35:50 Register *gorm.DbCache
2025/05/12 18:35:50 Register gorm.DbProvider
2025/05/12 18:35:50 Register dal.ConstDbProvider
2025/05/12 18:35:50 Register uow.Manager
2025/05/12 18:35:50 Register vfs.Blob
2025/05/12 18:35:50 Register *redis.UniversalOptions
2025/05/12 18:35:50 Register redis.UniversalClient
2025/05/12 18:35:50 Register store.StoreInterface
2025/05/12 18:35:50 Register *cache.Cache[string]
2025/05/12 18:35:50 Register cache.CacheInterface[string]
2025/05/12 18:35:50 Register email.Client
2025/05/12 18:35:50 Register event.Producer
2025/05/12 18:35:50 Register *eventbus.EventBus
2025/05/12 18:35:50 Register *client.APIClient
2025/05/12 18:35:50 Register asynq.RedisConnOpt
2025/05/12 18:35:50 Register *asynq.Client
2025/05/12 18:35:50 Register server.Init
2025/05/12 18:35:50 Register *service.Helper
2025/05/12 18:35:50 Register *service.MsgService
2025/05/12 18:35:50 Register v1.MsgServiceServer
2025/05/12 18:35:50 Register *data.BarrierMigrator
2025/05/12 18:35:50 Register *data.StorageMigrator
2025/05/12 18:35:50 Register *data.Migrator
2025/05/12 18:35:50 Register http.ServiceRegister
2025/05/12 18:35:50 Register grpc.ServiceRegister
2025/05/12 18:35:50 Register *service.EventService
2025/05/12 18:35:50 Register v1.EventServiceServer
2025/05/12 18:35:50 Register grpc.ServiceRegister
2025/05/12 18:35:50 Register http.ServiceRegister
2025/05/12 18:35:50 Register saas.TenantStore
2025/05/12 18:35:50 Register api.GrpcConn
2025/05/12 18:35:50 Register v1.TenantServiceServer
2025/05/12 18:35:50 Register v1.TenantInternalServiceServer
2025/05/12 18:35:50 Register *casbin.PermissionService
2025/05/12 18:35:50 Register authz.PermissionManagementService
2025/05/12 18:35:50 Register authz.PermissionChecker
2025/05/12 18:35:50 Register *http.Server
2025/05/12 18:35:50 Register transport.Server
2025/05/12 18:35:50 Register *grpc.Server
2025/05/12 18:35:50 Register transport.Server
2025/05/12 18:35:50 Register *event.ConsumerFactoryServer
2025/05/12 18:35:50 Register transport.Server
2025/05/12 18:35:50 Register api.ClientName
2025/05/12 18:35:50 Register dal.ConnName
2025/05/12 18:35:50 Register seed.Contrib
2025/05/12 18:35:50 Register seed.Seeder
2025/05/12 18:35:50 Register *authz.Option
2025/05/12 18:35:50 Register *data.Data
2025/05/12 18:35:50 Register *casbin.EnforcerProvider
2025/05/12 18:35:50 Register biz.UserRepo
2025/05/12 18:35:50 Register biz.RefreshTokenRepo
2025/05/12 18:35:50 Register biz.RoleRepo
2025/05/12 18:35:50 Register biz.UserTenantRepo
2025/05/12 18:35:50 Register *data.Migrate
2025/05/12 18:35:50 Register biz.UserTokenRepo
2025/05/12 18:35:50 Register biz.UserSettingRepo
2025/05/12 18:35:50 Register biz.UserAddressRepo
2025/05/12 18:35:50 Register *biz.UserManager
2025/05/12 18:35:50 Register *biz.SignInManager
2025/05/12 18:35:50 Register biz.UserValidator
2025/05/12 18:35:50 Register *biz.RoleManager
2025/05/12 18:35:50 Register biz.LookupNormalizer
2025/05/12 18:35:50 Register *biz.DefaultOtpTokenProvider
2025/05/12 18:35:50 Register biz.OtpTokenProvider
2025/05/12 18:35:50 Register *biz.EmailTokenProvider
2025/05/12 18:35:50 Register *biz.PhoneTokenProvider
2025/05/12 18:35:50 Register biz.PasswordHasher
2025/05/12 18:35:50 Register biz.PasswordValidator
2025/05/12 18:35:50 Register *biz.RoleSeed
2025/05/12 18:35:50 Register *biz.UserSeed
2025/05/12 18:35:50 Register *biz.PermissionSeeder
2025/05/12 18:35:50 Register biz.EmailSender
2025/05/12 18:35:50 Register event.ConsumerHandler
2025/05/12 18:35:50 Register event.ConsumerHandler
2025/05/12 18:35:50 Register grpc.ServiceRegister
2025/05/12 18:35:50 Register http.ServiceRegister
2025/05/12 18:35:50 Register *service.UserRoleContrib
2025/05/12 18:35:50 Register *idp.WechatFactory
2025/05/12 18:35:50 Register *client.API
2025/05/12 18:35:50 Register *service.UserService
2025/05/12 18:35:50 Register v1.UserServiceServer
2025/05/12 18:35:50 Register v1.UserAdminServiceServer
2025/05/12 18:35:50 Register *service.UserInternalService
2025/05/12 18:35:50 Register v1.UserInternalServiceServer
2025/05/12 18:35:50 Register *service.AccountService
2025/05/12 18:35:50 Register v1.AccountServer
2025/05/12 18:35:50 Register *service.AuthService
2025/05/12 18:35:50 Register v1.AuthServer
2025/05/12 18:35:50 Register *service.RoleService
2025/05/12 18:35:50 Register v1.RoleServiceServer
2025/05/12 18:35:50 Register *service.PermissionService
2025/05/12 18:35:50 Register v1.PermissionServiceServer
2025/05/12 18:35:50 Register *service.WeChatAuthService
2025/05/12 18:35:50 Register v1.WeChatAuthServiceServer
2025/05/12 18:35:50 Register *api.UserTenantContrib
2025/05/12 18:35:50 Register session.RefreshTokenProvider
2025/05/12 18:35:50 Register *http.Auth
2025/05/12 18:35:50 Register *kratos.App
2025/05/12 18:35:50 Resolved *conf.UserConf
2025/05/12 18:35:50 Resolved log.Logger
2025/05/12 18:35:50 Resolved api.ClientName
2025/05/12 18:35:50 Resolved *conf.Services
2025/05/12 18:35:50 Resolved *conf.Client
2025/05/12 18:35:50 Resolved *di.Container
2025/05/12 18:35:50 Register *clientv3.Client
2025/05/12 18:35:50 Resolved *clientv3.Client
2025/05/12 18:35:50 Resolved registry.Discovery
2025/05/12 18:35:50 Resolved *api.Option
2025/05/12 18:35:50 Resolved *conf.Security
2025/05/12 18:35:50 Resolved *jwt.TokenizerConfig
2025/05/12 18:35:50 Resolved jwt.Tokenizer
2025/05/12 18:35:50 Resolved api.TokenManager
2025/05/12 18:35:50 Resolved []grpc.ClientOption
2025/05/12 18:35:50 Resolved api.GrpcConn
2025/05/12 18:35:50 Resolved v1.TenantInternalServiceServer
2025/05/12 18:35:50 Resolved saas.TenantStore
2025/05/12 18:35:50 Resolved *conf.Data
2025/05/12 18:35:50 Resolved *gorm.SqlDbCache
2025/05/12 18:35:50 Resolved *gorm.DbCache
2025/05/12 18:35:50 Resolved uow.Manager
2025/05/12 18:35:50 Resolved data.ConnStrings
2025/05/12 18:35:50 Resolved dal.ConstDbProvider
2025/05/12 18:35:50 Resolved *data.Data
2025/05/12 18:35:50 Resolved *data.Migrate
2025/05/12 18:35:50 Resolved dal.ConnName
2025/05/12 18:35:50 Resolved *data.BarrierMigrator
2025/05/12 18:35:50 Resolved *eventbus.EventBus
2025/05/12 18:35:50 Resolved biz.RoleRepo
2025/05/12 18:35:50 Resolved *conf.AppConfig
2025/05/12 18:35:50 Resolved biz.LookupNormalizer
2025/05/12 18:35:50 Resolved *biz.RoleManager
2025/05/12 18:35:50 Resolved data.ConnStrResolver
2025/05/12 18:35:50 Resolved gorm.DbProvider
2025/05/12 18:35:50 Resolved *casbin.EnforcerProvider
2025/05/12 18:35:50 Resolved authz.PermissionManagementService
2025/05/12 18:35:50 Resolved *biz.RoleSeed
2025/05/12 18:35:50 Resolved biz.UserRepo
2025/05/12 18:35:50 Resolved biz.PasswordHasher
2025/05/12 18:35:50 Resolved biz.UserValidator
2025/05/12 18:35:50 Resolved biz.PasswordValidator
2025/05/12 18:35:50 Resolved biz.UserTokenRepo
2025/05/12 18:35:50 Resolved biz.RefreshTokenRepo
WARN msg=[resolver] Zero endpoint found,refused to write, instances: []
2025/05/12 18:35:50 Resolved biz.UserTenantRepo
2025/05/12 18:35:50 Resolved *redis.UniversalOptions
2025/05/12 18:35:50 Resolved redis.UniversalClient
2025/05/12 18:35:50 Resolved store.StoreInterface
2025/05/12 18:35:50 Resolved cache.CacheInterface[string]
2025/05/12 18:35:50 Resolved *biz.EmailTokenProvider
2025/05/12 18:35:50 Resolved *biz.PhoneTokenProvider
2025/05/12 18:35:50 Resolved biz.OtpTokenProvider
2025/05/12 18:35:50 Resolved *biz.UserManager
2025/05/12 18:35:50 Resolved *biz.UserSeed
2025/05/12 18:35:50 Resolved *biz.PermissionSeeder
2025/05/12 18:35:50 Resolved seed.Contrib
2025/05/12 18:35:50 Resolved []seed.Contrib
2025/05/12 18:35:50 Resolved seed.Seeder
WARN msg=[resolver] Zero endpoint found,refused to write, instances: []
INFO ts=2025-05-12T18:35:50-05:00 caller=di@v1.11.1/container.go:198 service.id=dev service.name=user service.version= trace_id= span_id= msg=closing the data resources
panic: local event producer not registered

goroutine 1 [running]:
github.com/go-saas/kit/event.NewFactoryProducer(0xc0008d4080, 0xc000fa4f60)
	/home/wsi/developer/projects/rantipay/wankarlab/project/rantipay-saas/kit/event/producer.go:30 +0x139
github.com/go-saas/kit/pkg/dal.NewEventProducer(0x3?, {0x264474e?, 0x0?}, 0xc000fa4f60)
	/home/wsi/developer/projects/rantipay/wankarlab/project/rantipay-saas/kit/pkg/dal/dal.go:115 +0x2f
reflect.Value.call({0x2283000?, 0x3bd7ae8?, 0x41d8c5?}, {0x264485e, 0x4}, {0xc0008aa4e0, 0x3, 0x58?})
	/usr/local/go/src/reflect/value.go:596 +0xca6
reflect.Value.Call({0x2283000?, 0x3bd7ae8?, 0x2556240?}, {0xc0008aa4e0?, 0xc0009e14d8?, 0x41551b?})
	/usr/local/go/src/reflect/value.go:380 +0xb9
github.com/goava/di.constructorCompiler.compile({0x4, {{0x4620a3c, 0x2f}, {0x41ccb30, 0x2283000}, {0x2283000, 0x3bd7ae8, 0x13}}}, {0xc0008aa4e0, 0x3, ...}, ...)
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/cmp_ctor.go:50 +0x72
github.com/goava/di.(*node).Value(0xc0010012c0, {0x419efd8, 0xc001006340})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:74 +0x275
github.com/goava/di.(*node).Value(0xc00101ee60, {0x419efd8, 0xc001006340})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/node.go:68 +0x10d
github.com/goava/di.(*Container).invoke(0xc000fa4f60, {0x213ea80, 0x3bd7920}, {0x1?, 0xc001006340?, 0xc000fa4f60?})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/container.go:349 +0x4a8
github.com/goava/di.(*Container).Invoke(0xc0009e1d50?, {0x213ea80?, 0x3bd7920?}, {0x0?, 0x0?, 0x4d414e59445f5450?})
	/home/wsi/go/pkg/mod/github.com/goava/di@v1.11.1/container.go:111 +0x25
main.main()
	/home/wsi/developer/projects/rantipay/wankarlab/project/rantipay-saas/kit/user/cmd/user/main.go:181 +0x12c5
