# Recrear las configuraciones con valores correctos
cd ~/developer/projects/rantipay/wankarlab/rantipay_saas

# Configuración principal
cat > configs/config.yaml << 'EOF'
app:
  name: go-saas-kit
  host_display_name: GO-SAAS-KIT
services:
  registry:
    type: etcd
    endpoint: http://etcd:2379
data:
  endpoints:
    databases:
      default:
        driver: mysql
        source: root:youShouldChangeThis@tcp(mysqld:3306)/kit?parseTime=true&loc=Local&charset=utf8mb4&interpolateParams=true
    redis:
      default:
        addrs: ["redis:6379"]
        password: youShouldChangeThis
    email: {}
EOFdp: {}ord: "123456"0 << 'EOF'a]
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Actualizar configuración de MySQL en docker-compose-update.yml
cat > docker-compose-update.yml << 'EOF'
services:
  # NGINX como API Gateway
  nginx:
    image: nginx:1.21
    ports:
      - "81:80"
    volumes:
      - ./nginx-gateway/nginx.conf:/etc/nginx/nginx.conf:ro
    restart: unless-stopped
    networks:
      - app-network

  # Servicio User
  user:
    image: goxiaoy/go-saas-kit-user:latest
    ports:
      - "8000:8000"
      - "9000:9000"
    environment:
      - APP_ENV=dev
    volumes:
EOFtcd_data::ridgek-stoppedetcdRLS=http://etcd:2379angeThis/conf.d/default.conf:ro
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Verificar que etcd esté funcionando correctamente
docker exec -it rantipay_saas-etcd-1 etcdctl endpoint health || echo "Etcd no está funcionando correctamente"
Error response from daemon: No such container: rantipay_saas-etcd-1
Etcd no está funcionando correctamente
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ cat > nginx-gateway/nginx.conf << 'EOF'
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen 80;
        server_name localhost;
        
        # Rutas para el servicio User
        location ~ ^/v1/user/ {
            proxy_pass http://user:8000;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
EOF }   }   return 404 'API Gateway: Endpoint not found';_forwarded_for;
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Crear una versión actualizada del docker-compose con el servicio User simplificado
cat > docker-compose-simple.yml << 'EOF'
services:
  # NGINX como API Gateway
  nginx:
    image: nginx:1.21
    ports:
      - "81:80"
    volumes:
      - ./nginx-gateway/nginx.conf:/etc/nginx/nginx.conf:ro
    restart: unless-stopped
    networks:
      - app-network

  # Servicio User simplificado
  user:
    image: simple-user:debug
    ports:
      - "8000:8000"
    volumes:
      - ./configs:/data/conf
      - ./kit/quickstart/.assets:/app/.assets
    restart: unless-stopped
chmod +x start-simple.shntend, abre en tu navegador: http://localhost:8080"conf:ro
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Versión completa (con servicios de go-saas/kit)
./start-go-saas-stack.sh

# O versión simplificada
./start-simple.sh
Limpiando entorno anterior...
[+] Running 8/8
 ✔ Container rantipay_saas-saas-1     Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-sys-1      Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-web-1      Removed                                                                                                              1.9s 
 ✔ Container rantipay_saas-user-1     Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-mysqld-1   Removed                                                                                                              1.1s 
 ✔ Container rantipay_saas-redis-1    Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-nginx-1    Removed                                                                                                              0.1s 
 ✔ Network rantipay_saas_app-network  Removed                                                                                                              0.2s 
Iniciando stack con servicios go-saas/kit...
[+] Running 9/9
 ✔ Network rantipay_saas_app-network  Created                                                                                                              0.1s 
 ✔ Container rantipay_saas-etcd-1     Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-nginx-1    Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-mysqld-1   Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-redis-1    Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-web-1      Started                                                                                                              0.6s 
 ✔ Container rantipay_saas-user-1     Started                                                                                                              0.7s 
 ✔ Container rantipay_saas-saas-1     Started                                                                                                              1.0s 
 ✔ Container rantipay_saas-sys-1      Started                                                                                                              1.0s 
Esperando a que los servicios estén disponibles...
Verificando estado de los servicios...
1. Usuario:
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.21.6</center>
</body>
</html>
2. SaaS:
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.21.6</center>
</body>
</html>
3. Sys:
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.21.6</center>
</body>
</html>

Configuración completa:
- Frontend disponible en: http://localhost:8080
- API Gateway disponible en: http://localhost:81/v1/
- Servicios individuales disponibles en:
  - User: http://localhost:8000
  - SaaS: http://localhost:8002
  - Sys: http://localhost:8003

Para probar el frontend, abre en tu navegador: http://localhost:8080
Limpiando entorno anterior...
[+] Running 9/9
 ✔ Container rantipay_saas-user-1     Removed                                                                                                              0.1s 
 ✔ Container rantipay_saas-redis-1    Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-web-1      Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-mysqld-1   Removed                                                                                                              1.7s 
 ✔ Container rantipay_saas-nginx-1    Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-saas-1     Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-etcd-1     Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-sys-1      Removed                                                                                                              0.0s 
 ✔ Network rantipay_saas_app-network  Removed                                                                                                              0.2s 
Iniciando stack simplificado...
[+] Running 6/6
 ✔ Network rantipay_saas_app-network  Created                                                                                                              0.1s 
 ✔ Container rantipay_saas-nginx-1    Started                                                                                                              0.3s 
 ✔ Container rantipay_saas-user-1     Started                                                                                                              0.3s 
 ✔ Container rantipay_saas-redis-1    Started                                                                                                              0.3s 
 ✔ Container rantipay_saas-mysqld-1   Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-web-1      Started                                                                                                              0.5s 
Esperando a que los servicios estén disponibles...
Verificando estado del gateway...
Hello from simple user service
Configuración simplificada completa:
- Frontend disponible en: http://localhost:8080
- API Gateway disponible en: http://localhost:81/v1/
- Servicio User disponible directamente en: http://localhost:8000

Para probar el frontend, abre en tu navegador: http://localhost:8080
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ docker ps
CONTAINER ID   IMAGE                              COMMAND                  CREATED              STATUS              PORTS                                                    NAMES
7e70ea89097e   goxiaoy/go-saas-kit-frontend:dev   "/docker-entrypoint.…"   About a minute ago   Up About a minute   8080/tcp, 0.0.0.0:8080->80/tcp, [::]:8080->80/tcp        rantipay_saas-web-1
94a114fa6581   nginx:1.21                         "/docker-entrypoint.…"   About a minute ago   Up About a minute   0.0.0.0:81->80/tcp, [::]:81->80/tcp                      rantipay_saas-nginx-1
08528a3f56a3   redis:6.0                          "docker-entrypoint.s…"   About a minute ago   Up About a minute   0.0.0.0:7379->6379/tcp, [::]:7379->6379/tcp              rantipay_saas-redis-1
6541f8627101   mysql:8.0                          "docker-entrypoint.s…"   About a minute ago   Up About a minute   33060/tcp, 0.0.0.0:3406->3306/tcp, [::]:3406->3306/tcp   rantipay_saas-mysqld-1
6bece8f3d721   simple-user:debug                  "/app/app"               About a minute ago   Up About a minute   0.0.0.0:8000->8000/tcp, :::8000->8000/tcp                rantipay_saas-user-1
0d00f467b041   goxiaoy/go-saas-kit-frontend:dev   "/docker-entrypoint.…"   13 hours ago         Up 13 hours         80/tcp, 8080/tcp                                         kit-frontend-web-1
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ docker network ls
NETWORK ID     NAME                        DRIVER    SCOPE
a35ca1fafeea   bridge                      bridge    local
ddbb3ccce98f   host                        host      local
208b7406e69b   kit-frontend_default        bridge    local
3a2cd102f703   none                        null      local
0e937a12e43a   rantipay_saas_app-network   bridge    local
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ 



 # Recrear las configuraciones con valores correctos
cd ~/developer/projects/rantipay/wankarlab/rantipay_saas

# Configuración principal
cat > configs/config.yaml << 'EOF'
app:
  name: go-saas-kit
  host_display_name: GO-SAAS-KIT
services:
  registry:
    type: etcd
    endpoint: http://etcd:2379
data:
  endpoints:
    databases:
      default:
        driver: mysql
        source: root:youShouldChangeThis@tcp(mysqld:3306)/kit?parseTime=true&loc=Local&charset=utf8mb4&interpolateParams=true
    redis:
      default:
        addrs: ["redis:6379"]
        password: youShouldChangeThis
    email: {}
EOFdp: {}ord: "123456"0 << 'EOF'a]
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Actualizar configuración de MySQL en docker-compose-update.yml
cat > docker-compose-update.yml << 'EOF'
services:
  # NGINX como API Gateway
  nginx:
    image: nginx:1.21
    ports:
      - "81:80"
    volumes:
      - ./nginx-gateway/nginx.conf:/etc/nginx/nginx.conf:ro
    restart: unless-stopped
    networks:
      - app-network

  # Servicio User
  user:
    image: goxiaoy/go-saas-kit-user:latest
    ports:
      - "8000:8000"
      - "9000:9000"
    environment:
      - APP_ENV=dev
    volumes:
EOFtcd_data::ridgek-stoppedetcdRLS=http://etcd:2379angeThis/conf.d/default.conf:ro
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Verificar que etcd esté funcionando correctamente
docker exec -it rantipay_saas-etcd-1 etcdctl endpoint health || echo "Etcd no está funcionando correctamente"
Error response from daemon: No such container: rantipay_saas-etcd-1
Etcd no está funcionando correctamente
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ cat > nginx-gateway/nginx.conf << 'EOF'
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen 80;
        server_name localhost;
        
        # Rutas para el servicio User
        location ~ ^/v1/user/ {
            proxy_pass http://user:8000;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
EOF }   }   return 404 'API Gateway: Endpoint not found';_forwarded_for;
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Crear una versión actualizada del docker-compose con el servicio User simplificado
cat > docker-compose-simple.yml << 'EOF'
services:
  # NGINX como API Gateway
  nginx:
    image: nginx:1.21
    ports:
      - "81:80"
    volumes:
      - ./nginx-gateway/nginx.conf:/etc/nginx/nginx.conf:ro
    restart: unless-stopped
    networks:
      - app-network

  # Servicio User simplificado
  user:
    image: simple-user:debug
    ports:
      - "8000:8000"
    volumes:
      - ./configs:/data/conf
      - ./kit/quickstart/.assets:/app/.assets
    restart: unless-stopped
chmod +x start-simple.shntend, abre en tu navegador: http://localhost:8080"conf:ro
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ # Versión completa (con servicios de go-saas/kit)
./start-go-saas-stack.sh

# O versión simplificada
./start-simple.sh
Limpiando entorno anterior...
[+] Running 8/8
 ✔ Container rantipay_saas-saas-1     Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-sys-1      Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-web-1      Removed                                                                                                              1.9s 
 ✔ Container rantipay_saas-user-1     Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-mysqld-1   Removed                                                                                                              1.1s 
 ✔ Container rantipay_saas-redis-1    Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-nginx-1    Removed                                                                                                              0.1s 
 ✔ Network rantipay_saas_app-network  Removed                                                                                                              0.2s 
Iniciando stack con servicios go-saas/kit...
[+] Running 9/9
 ✔ Network rantipay_saas_app-network  Created                                                                                                              0.1s 
 ✔ Container rantipay_saas-etcd-1     Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-nginx-1    Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-mysqld-1   Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-redis-1    Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-web-1      Started                                                                                                              0.6s 
 ✔ Container rantipay_saas-user-1     Started                                                                                                              0.7s 
 ✔ Container rantipay_saas-saas-1     Started                                                                                                              1.0s 
 ✔ Container rantipay_saas-sys-1      Started                                                                                                              1.0s 
Esperando a que los servicios estén disponibles...
Verificando estado de los servicios...
1. Usuario:
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.21.6</center>
</body>
</html>
2. SaaS:
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.21.6</center>
</body>
</html>
3. Sys:
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.21.6</center>
</body>
</html>

Configuración completa:
- Frontend disponible en: http://localhost:8080
- API Gateway disponible en: http://localhost:81/v1/
- Servicios individuales disponibles en:
  - User: http://localhost:8000
  - SaaS: http://localhost:8002
  - Sys: http://localhost:8003

Para probar el frontend, abre en tu navegador: http://localhost:8080
Limpiando entorno anterior...
[+] Running 9/9
 ✔ Container rantipay_saas-user-1     Removed                                                                                                              0.1s 
 ✔ Container rantipay_saas-redis-1    Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-web-1      Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-mysqld-1   Removed                                                                                                              1.7s 
 ✔ Container rantipay_saas-nginx-1    Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-saas-1     Removed                                                                                                              0.0s 
 ✔ Container rantipay_saas-etcd-1     Removed                                                                                                              0.2s 
 ✔ Container rantipay_saas-sys-1      Removed                                                                                                              0.0s 
 ✔ Network rantipay_saas_app-network  Removed                                                                                                              0.2s 
Iniciando stack simplificado...
[+] Running 6/6
 ✔ Network rantipay_saas_app-network  Created                                                                                                              0.1s 
 ✔ Container rantipay_saas-nginx-1    Started                                                                                                              0.3s 
 ✔ Container rantipay_saas-user-1     Started                                                                                                              0.3s 
 ✔ Container rantipay_saas-redis-1    Started                                                                                                              0.3s 
 ✔ Container rantipay_saas-mysqld-1   Started                                                                                                              0.4s 
 ✔ Container rantipay_saas-web-1      Started                                                                                                              0.5s 
Esperando a que los servicios estén disponibles...
Verificando estado del gateway...
Hello from simple user service
Configuración simplificada completa:
- Frontend disponible en: http://localhost:8080
- API Gateway disponible en: http://localhost:81/v1/
- Servicio User disponible directamente en: http://localhost:8000

Para probar el frontend, abre en tu navegador: http://localhost:8080
wsi@dev:~/developer/projects/rantipay/wankarlab/rantipay_saas$ 